<!DOCTYPE html>
<html lang="es">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!-- Meta, title, CSS, favicons, etc. -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="icon" href="images/favicon.ico" type="image/ico" /> -->

  <title>GPSMOVIL | Transporte</title>

  <!-- Bootstrap -->
  <link href="vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="vendors/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Datatables -->
  <link href="vendors/datatables.net/datatables.min.css" rel="stylesheet">
  <link href="vendors/datatables.net/DataTables-1.10.18/css/dataTables.bootstrap.min.css" rel="stylesheet">
  <!-- NProgress -->
  <link href="vendors/nprogress/nprogress.css" rel="stylesheet">
  <!-- bootstrap-daterangepicker -->
  <link href="vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">
  <!-- Custom Theme Style -->
  <!-- <link href="assets/css/custom.min.css" rel="stylesheet"> -->
  <link href="vendors/dropzone/dropzone.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="./assets/css/inputFile.css"> -->
  <!-- Seleect2 -->
  <link href='vendors/select2/css/select2.css' rel='stylesheet' type='text/css'>
</head>

<body>
  <div style="margin: 5vh;">
    <!-- <div style="text-align: center;">
      <img src="assets/images/logo.jpeg" style="max-width: 30vh; margin-bottom: 5%" alt="">
    </div> -->
    <!-- <a href="tel:+34000000000">Clicka para llamar</a> -->

    <div id=panel_codigoEmpresa style="display: none">
      <form class="form-horizontal" role="form" id="frm_registroEmpresa" action="">
        <div class="form-group">
          <label for="inp_codigoEmpresa" class="col-sm-3 control-label">Codigo de Empresa</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" id="inp_codigoEmpresa" minlength="1" required
              placeholder="Digite el codigo de la empresa" />
          </div>
        </div>
        <hr>
        <div class="col-md-12">
          <input type="submit" class="btn btn-success" style="width: -webkit-fill-available;"
            id="btn_frm_empresaContinuar" value="Continuar" />
        </div>
      </form>

    </div>

    <div id="panel_crearCuenta" style="display: none">
      <form class="form-horizontal" role="form" id="frm_registroUsuario" name="frm_registroUsuario" action="">
        <div class="form-group">
          <label for="inp_nombreResponsable" class="col-sm-3 control-label">Nombre Completo:</label>
          <div class="col-sm-9">
            <input id="inp_nombreResponsable" name="inp_nombreResponsable" type="text" class="form-control"
              placeholder="Ingrese el nombre de la persona Responsable" minlength="5" required />
          </div>
        </div>
        <div class="form-group">
          <label for="inp_identificacionResponsable" class="col-sm-3 control-label">Cédula
            Identidad:</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" id="inp_identificacionResponsable"
              name="inp_identificacionResponsable" placeholder="Digite la cedula de la persona Responsable"
              minlength="9" required />
          </div>
        </div>
        <div class="form-group">
          <label for="inp_telefonoResponsable" class="col-sm-3 control-label">Teléfono:</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" id="inp_telefonoResponsable" name="inp_telefonoResponsable"
              placeholder="Digite su numero de teléfono" minlength="8" maxlength="8" required />
          </div>
        </div>
        <div class="form-group">
          <label for="inp_emailResponsable" class="col-sm-3 control-label">Correo Electronico:</label>
          <div class="col-sm-9">
            <input type="email" class="form-control" id="inp_emailResponsable" name="inp_emailResponsable"
              autocomplete="username" placeholder="Ingrese el correo electronico de la persona Responsable"
              minlength="5" required />
          </div>
        </div>
        <div class="form-group">
          <label for="inp_passwdResponsable" class="col-sm-3 control-label">Crear Contraseña:</label>
          <div class="col-sm-9">
            <input type="password" name="inp_passwdResponsable" autocomplete="new-password" class="form-control"
              id="inp_passwdResponsable" placeholder="Crear Nueva Contraseña para el Sistema" minlength="5" required />
          </div>
        </div>
        <div class="form-group">
          <label for="inp_valPasswdResponsable" class="col-sm-3 control-label">Validar
            Contraseña:</label>
          <div class="col-sm-9">
            <input id="inp_valPasswdResponsable" name="inp_valPasswdResponsable" autocomplete="new-password"
              type="password" class="form-control" placeholder="Repita Nueva Contraseña para el Sistema" minlength="5"
              required />
          </div>
        </div>
        <hr>
        <div class="col-md-12">
          <input type="submit" class="btn btn-success" style="width: -webkit-fill-available;"
            id="btn_registrarResponsable" value="Crear Cuenta" />
        </div>
        <br>
        <div class="col-md-12">
          <input type="submit" class="btn btn-danger" style="width: -webkit-fill-available;" id="btn_atras"
            value="Atras" />
        </div>
      </form>
    </div>

    <div id="panel_volver" style="display: none;margin-top: 20vh;text-align: center;">
      <h3>Presione atrás</h3>
      <h3>para regresar</h3>
      <h3>al inicio</h3>
    </div>

    <div id="panel_gestionPasajero" style="display: none;margin-top: 3vh;text-align: right;">
      <button type="button" class="btn btn-primary" id="btn_registrarPasajero" style="margin-bottom: 1vh;">Nuevo
        Pasajero</button>
      <table id="tbl_pasajeros" class="display" style="width:100%">
      </table>
    </div>

    <div id="panel_registroPasajero" style="display: none;margin-top: 3vh;text-align: right;">

      <form style="text-align: left" class="form-horizontal" role="form" id="frm_registroPasajero"
        name="frm_registroPasajero" action="">
        <div class="form-group">
          <label for="inp_identificacionPasajero" class="col-sm-3 control-label">Cédula
            Identidad:</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" id="inp_identificacionPasajero" name="inp_identificacionPasajero"
              placeholder="Digite la cedula" minlength="9" required />
          </div>
        </div>
        <div class="form-group">
          <label for="inp_nombrePasajero" class="col-sm-3 control-label">Nombre Completo:</label>
          <div class="col-sm-9">
            <input id="inp_nombrePasajero" name="inp_nombrePasajero" type="text" class="form-control"
              placeholder="Ingrese el nombre completo" minlength="5" required />
          </div>
        </div>
        <div class="form-group">
          <label for="inp_codTransportista" class="col-sm-3 control-label">Codigo Transportista:</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" id="inp_codTransportista" name="inp_codTransportista"
              placeholder="Digite el nombre del transportista" minlength="1" maxlength="5" required />
          </div>
        </div>
        <hr>
        <div class="col-md-12">
          <input type="submit" class="btn btn-success" style="width: -webkit-fill-available;" id="btn_crearPasajero"
            value="Agregar" />
        </div>
        <br>
        <div class="col-md-12">
          <input type="submit" class="btn btn-danger" style="width: -webkit-fill-available;"
            id="btn_frmAgregaPasajeroAtras" value="Atras" />
        </div>
      </form>



    </div>
  </div>


  <!-- Modal -->
  <div id="mdl_editaPasajero" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Editar Pasajero</h4>
        </div>
        <div class="modal-body">
          <form style="text-align: left" class="form-horizontal" role="form" id="frm_registroPasajero"
            name="frm_registroPasajero" action="">
            <div class="form-group">
              <label for="inp_identificacionPasajero" class="col-sm-3 control-label">Cédula
                Identidad:</label>
              <div class="col-sm-9">
                <input type="text" class="form-control" id="inp_identificacionPasajero"
                  name="inp_identificacionPasajero" placeholder="Digite la cedula" minlength="9" required />
              </div>
            </div>
            <div class="form-group">
              <label for="inp_nombrePasajero" class="col-sm-3 control-label">Nombre Completo:</label>
              <div class="col-sm-9">
                <input id="inp_nombrePasajero" name="inp_nombrePasajero" type="text" class="form-control"
                  placeholder="Ingrese el nombre completo" minlength="5" required />
              </div>
            </div>
            <div class="form-group">
              <label for="inp_codTransportista" class="col-sm-3 control-label">Codigo Transportista:</label>
              <div class="col-sm-9">
                <input type="text" class="form-control" id="inp_codTransportista" name="inp_codTransportista"
                  placeholder="Digite el nombre del transportista" minlength="1" maxlength="5" required />
              </div>
            </div>
            <hr>
            <div class="col-md-12">
              <input type="submit" class="btn btn-success" style="width: -webkit-fill-available;" id="btn_crearPasajero"
                value="Agregar" />
            </div>
            <br>
            <div class="col-md-12">
              <input type="submit" class="btn btn-danger" style="width: -webkit-fill-available;"
                id="btn_frmAgregaPasajeroAtras" value="Atras" />
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>


  <!-- jQuery -->
  <script src="assets/js/jquery/dist/jquery.min.js"></script>
  <!-- Bootstrap -->
  <script src="vendors/bootstrap/dist/js/bootstrap.min.js"></script>
  <!-- NProgress -->
  <script src="vendors/nprogress/nprogress.js"></script>
  <!-- JS dataTables -->
  <script src="vendors/datatables.net/DataTables-1.10.18/js/jquery.dataTables.min.js"></script>
  <script src="vendors/datatables.net/DataTables-1.10.18/js/dataTables.bootstrap.min.js"></script>
  <!-- bootstrap-progressbar -->
  <script src="vendors/bootstrap-progressbar/bootstrap-progressbar.min.js"></script>
  <!-- SweetAlert2 -->
  <!-- Optional: include a polyfill for ES6 Promises for IE11 and Android browser -->
  <!-- <script src="vendors/sweetalert2/promise-polyfill.js"></script> -->
  <script src="vendors/sweetalert2/sweetalert2@8.js"></script>
  <script href="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
  <!-- bootstrap-daterangepicker -->
  <script src="vendors/moment/min/moment.min.js"></script>
  <script src="vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
  <!-- Jquery Validate -->
  <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/jquery.form-validator.min.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.1/dist/jquery.validate.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.1/dist/additional-methods.js"></script>
  <!-- JS Scripts -->
  <script src="assets/js/usuario.js"></script>
  <script src="assets/js/pasajero.js"></script>
  <!-- Seleect2 -->
  <script src='vendors/select2/js/select2.js'></script>
  <!-- Custom Theme Scripts -->
  <script src="assets/js/custom.js"></script>
  <script src="vendors/dropzone/dropzone.js"></script>
  <!-- <script src="./assets/js/inputFile.js"></script> -->
</body>

</html>

<script>
  // var url_string = 
  var url = new URL(window.location.href);
  var responsableId = null;
  responsableId = url.searchParams.get("responsableId");
  var opcion = url.searchParams.get("opcion");

  $(document).ready(function () {
    clear();
    opcion == "registroResponsable" ? $('#panel_codigoEmpresa').show() : opcion == "registroPasajero" ? pagePasajero() : false;

    function pagePasajero() {
      pasajero.idResponsable = responsableId;
      $('#panel_gestionPasajero').show()
      pasajero.ReadAll_list;
    }

    $('#inp_identificacionPasajero').change(function () {
      if ($(this).val().length > 8) {
        pasajero.cedula = $(this).val();
        pasajero.Search_cedula
      }
    });

    $("#btn_registrarPasajero").click(function (e) {
      e.preventDefault();
      clear();
      $('#tbl_pasajeros').css('display', 'none');
      $("#btn_registrarPasajero").css('display', 'none');
      $('#panel_registroPasajero').show()
    })

    $("#btn_frmAgregaPasajeroAtras").click(function (e) {
      e.preventDefault();
      clear();
      $('#tbl_pasajeros').show();
      $("#panel_gestionPasajero").show();
      $("#btn_registrarPasajero").show();
      $('#panel_registroPasajero').css('display', 'none');
    })

    validateRules();

    $("#btn_atras").click(function (e) {
      e.preventDefault();
      $('#panel_crearCuenta').css('display', 'none');
      $('#panel_codigoEmpresa').show()
    })

    function clear() {
      $("#inp_codigoEmpresa").val("");
      $("#inp_nombreResponsable").val("");
      $("#inp_identificacionResponsable").val("");
      $("#inp_emailResponsable").val("");
      $("#inp_passwdResponsable").val("");
      $("#inp_valPasswdResponsable").val("");
      $("#inp_telefonoResponsable").val("");
      $("#inp_nombrePasajero").val("");
      $("#inp_identificacionPasajero").val("");
      $("#inp_nombrePasajero").val("");
      $("#inp_codTransportista").val("");
    }

  });

  function validateRules() {


    $(function () {
      $("#frm_registroPasajero").validate({
        rules: {
          'inp_identificacionPasajero': {
            required: true,
            number: true,
            minlength: 5
          },
          'inp_nombrePasajero': {
            required: true,
            minlength: 5
          },
          'inp_codTransportista': {
            required: true,
            number: true,
            minlength: 1,
            maxlength: 3
          }
        },
        submitHandler: function () {
          event.preventDefault();
          pasajero.codigoEmpresa = $("#inp_codTransportista").val();
          pasajero.nombre = $("#inp_nombrePasajero").val();
          pasajero.cedula = $("#inp_identificacionPasajero").val();
          pasajero.idResponsable = responsableId;
          pasajero.Registrar;

          $('#tbl_pasajeros').show();
          $("#panel_gestionPasajero").show();
          $("#btn_registrarPasajero").show();
          $('#panel_registroPasajero').css('display', 'none');
        }
      });

      $("#frm_registroEmpresa").validate({
        rules: {
          'inp_codigoEmpresa': {
            required: true,
            number: true
          }
        },
        submitHandler: function (form) {
          event.preventDefault();
          usuario.codigoEmpresa = $("#inp_codigoEmpresa").val();
          usuario.Buscar_id;
        }
      });

      $("#frm_registroUsuario").validate({
        rules: {
          'inp_nombreResponsable': {
            required: true,
            minlength: 5
          },
          'inp_identificacionResponsable': {
            required: true,
            minlength: 9
          },
          'inp_telefonoResponsable': {
            required: true,
            minlength: 8,
            maxlength: 8
          },
          'inp_emailResponsable': {
            required: true,
            email: true
          },
          'inp_passwdResponsable': {
            required: true,
            minlength: 5
          },
          'inp_valPasswdResponsable': {
            required: true,
            minlength: 5,
            equalTo: "#inp_passwdResponsable"
          },
          'password': {
            required: true,
            minlength: 5
          }
        },
        submitHandler: function (form) {
          event.preventDefault();
          usuario.codigoEmpresa = $("#inp_codigoEmpresa").val();
          usuario.nombre = $("#inp_nombreResponsable").val();
          usuario.cedula = $("#inp_identificacionResponsable").val();
          usuario.telefono = $("#inp_telefonoResponsable").val();
          usuario.correo = $("#inp_emailResponsable").val();
          usuario.passwd = $("#inp_passwdResponsable").val();
          usuario.Registrar;
          this.clear();
        }
      });

    });


  }

</script>